# Makefile for GNUpod
#
prefix       = @prefix@
exec_prefix  = @exec_prefix@
bindir       = @bindir@
infodir      = @infodir@
mandir       = @mandir@
SHELL        = @SHELL@
top_srcdir   = @top_srcdir@
perlbinary   = @PERL@
podmanbin    = @PODMAN@
pkgver       = @PACKAGE_VERSION@
pkgfname     = gnupod-@PACKAGE_VERSION@
pkgdir       = gnupod-@PACKAGE_VERSION@-noarch-1au


build:
	$(SHELL) $(top_srcdir)/mkinstalldirs build/bin
	$(SHELL) $(top_srcdir)/mkinstalldirs build/man
	$(SHELL) $(top_srcdir)/mkinstalldirs build/mod
	$(SHELL) $(top_srcdir)/mkinstalldirs build/info
	$(perlbinary) tools/gnupod_install.pl BUILD "$(perlbinary)" "$(podmanbin)" "$(bindir)" "$(infodir)" "$(mandir)" "$(DESTDIR)"
	cd build/man && gzip *.1
clean:
	rm -rf build
install:
	$(SHELL) $(top_srcdir)/mkinstalldirs $(DESTDIR)$(bindir)
	$(SHELL) $(top_srcdir)/mkinstalldirs $(DESTDIR)$(mandir)/man1
	$(perlbinary) tools/gnupod_install.pl INSTALL "$(perlbinary)" "$(podmanbin)" "$(bindir)" "$(infodir)" "$(mandir)" "$(DESTDIR)"
uninstall:
	$(perlbinary) tools/gnupod_install.pl REMOVE  "$(perlbinary)" "$(podmanbin)" "$(bindir)" "$(infodir)" "$(mandir)"
release: clean
	mkdir ../GNUPOD_R && find . | grep -v .git | grep -v \.\#| cpio -pvmd ../GNUPOD_R && cd ../GNUPOD_R && autoconf && rm Makefile && rm config.log config.status && rm -rf autom4te.cache testcases && echo DONE
